running = true

on_quit()
  running = false

on_mouse_motion(x, y)
  Out.printf("x = %%, y = %%\n", x, y)

main()
  Sdl.init()

  ml = MainLoop.new()
  ml.set_loop(Sdl.loop_func)
  ml.set_handler("sdl-quit", on_quit)
  ml.set_handler("sdl-mouse-motion", on_mouse_motion)

  screen = Sdl.Surface.new_screen(640, 480, 24, Sdl.SWSURFACE)

  last_ticks = 0
  while running
    ml.do_callback()
    ticks = Sdl.get_ticks()
    if ticks - last_ticks >= 1000
      last_ticks = ticks
      Out.printf("ticks = %%\n", ticks)

  Sdl.quit()
