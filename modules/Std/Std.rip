$
  #include <stdio.h>
  #include <stdlib.h>
$


module Std
  sprintf(format, *args)
    return Std.sprintf_array(format, args)

  sprintf_array(format, array)
    $
      char* f = val_to_string(__format);
      Tuple* array = val_to_tuple(__array);
      uint64 len = format(NULL, f, array->size, array->data);
      char out[len];
      format(out, f, array->size, array->data);
      return string_to_val(out);
    $
